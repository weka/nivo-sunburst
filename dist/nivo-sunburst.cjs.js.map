{"version":3,"file":"nivo-sunburst.cjs.js","sources":["../src/SunburstTooltip.tsx","../src/props.ts","../src/hooks.ts","../src/Arcs.tsx","../src/Sunburst.tsx","../src/ResponsiveSunburst.tsx"],"sourcesContent":["import { BasicTooltip } from '@nivo/tooltip'\nimport { ComputedDatum } from './types'\n\nexport const SunburstTooltip = <RawDatum,>({\n    id,\n    formattedValue,\n    color,\n}: ComputedDatum<RawDatum>) => (\n    <BasicTooltip id={id} value={formattedValue} enableChip={true} color={color} />\n)\n","import { ArcTransitionMode } from '@nivo/arcs'\nimport { OrdinalColorScaleConfig } from '@nivo/colors'\nimport { SunburstTooltip } from './SunburstTooltip'\nimport { SunburstLayerId } from './types'\n\nexport const defaultProps = {\n    id: 'id',\n    value: 'value',\n    innerRadius: 0.3,\n    cornerRadius: 0,\n    layers: ['arcs', 'arcLabels'] as SunburstLayerId[],\n    colors: { scheme: 'nivo' } as unknown as OrdinalColorScaleConfig,\n    colorBy: 'id' as const,\n    inheritColorFromParent: true,\n    childColor: { from: 'color' },\n    borderWidth: 1,\n    borderColor: 'white',\n    enableArcLabels: false,\n    arcLabel: 'formattedValue',\n    arcLabelsRadiusOffset: 0.5,\n    arcLabelsSkipAngle: 0,\n    arcLabelsSkipRadius: 0,\n    arcLabelsTextColor: { theme: 'labels.text.fill' },\n    animate: true,\n    motionConfig: 'gentle',\n    transitionMode: 'innerRadius' as ArcTransitionMode,\n    isInteractive: true,\n    defs: [],\n    fill: [],\n    tooltip: SunburstTooltip,\n    role: 'img',\n}\n","import { useMemo } from 'react'\nimport { partition as d3Partition, hierarchy as d3Hierarchy } from 'd3-hierarchy'\nimport cloneDeep from 'lodash/cloneDeep.js'\nimport sortBy from 'lodash/sortBy.js'\nimport { usePropertyAccessor, useValueFormatter } from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { Arc, useArcGenerator } from '@nivo/arcs'\nimport { useOrdinalColorScale, useInheritedColor, InheritedColorConfig } from '@nivo/colors'\nimport {\n    SunburstCommonProps,\n    ComputedDatum,\n    DataProps,\n    DatumId,\n    SunburstCustomLayerProps,\n} from './types'\nimport { defaultProps } from './props'\n\nexport const useSunburst = <RawDatum>({\n    data,\n    id = defaultProps.id,\n    value = defaultProps.value,\n    valueFormat,\n    radius,\n    innerRadius = defaultProps.innerRadius,\n    cornerRadius = defaultProps.cornerRadius,\n    colors = defaultProps.colors,\n    colorBy = defaultProps.colorBy,\n    inheritColorFromParent = defaultProps.inheritColorFromParent,\n    childColor = defaultProps.childColor as InheritedColorConfig<ComputedDatum<RawDatum>>,\n}: {\n    data: DataProps<RawDatum>['data']\n    id?: DataProps<RawDatum>['id']\n    value?: DataProps<RawDatum>['value']\n    valueFormat?: DataProps<RawDatum>['valueFormat']\n    radius: number\n    innerRadius?: SunburstCommonProps<RawDatum>['innerRadius']\n    cornerRadius?: SunburstCommonProps<RawDatum>['cornerRadius']\n    colors?: SunburstCommonProps<RawDatum>['colors']\n    colorBy?: SunburstCommonProps<RawDatum>['colorBy']\n    inheritColorFromParent?: SunburstCommonProps<RawDatum>['inheritColorFromParent']\n    childColor?: SunburstCommonProps<RawDatum>['childColor']\n}) => {\n    const theme = useTheme()\n    const getColor = useOrdinalColorScale<Omit<ComputedDatum<RawDatum>, 'color' | 'fill'>>(\n        colors,\n        colorBy\n    )\n    const getChildColor = useInheritedColor<ComputedDatum<RawDatum>>(childColor, theme)\n\n    const getId = usePropertyAccessor<RawDatum, DatumId>(id)\n    const getValue = usePropertyAccessor<RawDatum, number>(value)\n    const formatValue = useValueFormatter<number>(valueFormat)\n\n    const nodes: ComputedDatum<RawDatum>[] = useMemo(() => {\n        // d3 mutates the data for performance reasons,\n        // however it does not work well with reactive programming,\n        // this ensures that we don't mutate the input data\n        const clonedData = cloneDeep(data)\n\n        const hierarchy = d3Hierarchy(clonedData).sum(getValue)\n\n        const partition = d3Partition<RawDatum>().size([2 * Math.PI, radius * radius])\n        // exclude root node\n        const descendants = partition(hierarchy).descendants().slice(1)\n\n        const total = hierarchy.value ?? 0\n\n        // It's important to sort node by depth,\n        // it ensures that we assign a parent node\n        // which has already been computed, because parent nodes\n        // are going to be computed first\n        const sortedNodes = sortBy(descendants, 'depth')\n\n        return sortedNodes.reduce<ComputedDatum<RawDatum>[]>((acc, descendant) => {\n            const id = getId(descendant.data)\n            // d3 hierarchy node value is optional by default as it depends on\n            // a call to `count()` or `sum()`, and we previously called `sum()`,\n            // d3 typings could be improved and make it non optional when calling\n            // one of those.\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const value = descendant.value!\n            const percentage = (100 * value) / total\n            const path = descendant.ancestors().map(ancestor => getId(ancestor.data))\n\n            // Map the partition's radius range [0, radius] to [innerRadius * radius, radius]\n            const innerR = innerRadius * radius\n            const scale = 1 - innerRadius\n            const arc: Arc = {\n                startAngle: descendant.x0,\n                endAngle: descendant.x1,\n                innerRadius: innerR + Math.sqrt(descendant.y0) * scale,\n                outerRadius: innerR + Math.sqrt(descendant.y1) * scale,\n            }\n\n            let parent: ComputedDatum<RawDatum> | undefined\n            if (descendant.parent) {\n                // as the parent is defined by the input data, and we sorted the data\n                // by `depth`, we can safely assume it's defined.\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                parent = acc.find(node => node.id === getId(descendant.parent!.data))\n            }\n\n            const normalizedNode: ComputedDatum<RawDatum> = {\n                id,\n                path,\n                value,\n                percentage,\n                formattedValue: valueFormat ? formatValue(value) : `${percentage.toFixed(2)}%`,\n                color: '',\n                arc,\n                data: descendant.data,\n                depth: descendant.depth,\n                height: descendant.height,\n            }\n\n            if (inheritColorFromParent && parent && normalizedNode.depth > 1) {\n                normalizedNode.color = getChildColor(parent, normalizedNode)\n            } else {\n                normalizedNode.color = getColor(normalizedNode)\n            }\n\n            return [...acc, normalizedNode]\n        }, [])\n    }, [\n        data,\n        radius,\n        innerRadius,\n        getValue,\n        getId,\n        valueFormat,\n        formatValue,\n        getColor,\n        inheritColorFromParent,\n        getChildColor,\n    ])\n\n    const arcGenerator = useArcGenerator({ cornerRadius })\n\n    return { arcGenerator, nodes }\n}\n\n/**\n * Memoize the context to pass to custom layers.\n */\nexport const useSunburstLayerContext = <RawDatum>({\n    nodes,\n    arcGenerator,\n    centerX,\n    centerY,\n    radius,\n}: SunburstCustomLayerProps<RawDatum>): SunburstCustomLayerProps<RawDatum> =>\n    useMemo(\n        () => ({\n            nodes,\n            arcGenerator,\n            centerX,\n            centerY,\n            radius,\n        }),\n        [nodes, arcGenerator, centerX, centerY, radius]\n    )\n","import { createElement, useMemo } from 'react'\nimport * as React from 'react'\nimport { ArcGenerator, ArcsLayer } from '@nivo/arcs'\nimport { ComputedDatum, SunburstCommonProps, MouseHandlers } from './types'\nimport { useTooltip } from '@nivo/tooltip'\n\ninterface ArcsProps<RawDatum> {\n    center: [number, number]\n    data: ComputedDatum<RawDatum>[]\n    arcGenerator: ArcGenerator\n    borderWidth: SunburstCommonProps<RawDatum>['borderWidth']\n    borderColor: SunburstCommonProps<RawDatum>['borderColor']\n    isInteractive: SunburstCommonProps<RawDatum>['isInteractive']\n    onClick?: MouseHandlers<RawDatum>['onClick']\n    onMouseEnter?: MouseHandlers<RawDatum>['onMouseEnter']\n    onMouseMove?: MouseHandlers<RawDatum>['onMouseMove']\n    onMouseLeave?: MouseHandlers<RawDatum>['onMouseLeave']\n    tooltip: SunburstCommonProps<RawDatum>['tooltip']\n    transitionMode: SunburstCommonProps<RawDatum>['transitionMode']\n}\n\nexport const Arcs = <RawDatum,>({\n    center,\n    data,\n    arcGenerator,\n    borderWidth,\n    borderColor,\n    isInteractive,\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    tooltip,\n    transitionMode,\n}: ArcsProps<RawDatum>) => {\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const handleClick = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            onClick?.(datum, event)\n        }\n    }, [isInteractive, onClick])\n\n    const handleMouseEnter = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            showTooltipFromEvent(createElement(tooltip, datum), event)\n            onMouseEnter?.(datum, event)\n        }\n    }, [isInteractive, showTooltipFromEvent, tooltip, onMouseEnter])\n\n    const handleMouseMove = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            showTooltipFromEvent(createElement(tooltip, datum), event)\n            onMouseMove?.(datum, event)\n        }\n    }, [isInteractive, showTooltipFromEvent, tooltip, onMouseMove])\n\n    const handleMouseLeave = useMemo(() => {\n        if (!isInteractive) return undefined\n\n        return (datum: ComputedDatum<RawDatum>, event: React.MouseEvent<SVGPathElement>) => {\n            hideTooltip()\n            onMouseLeave?.(datum, event)\n        }\n    }, [isInteractive, hideTooltip, onMouseLeave])\n\n    return (\n        <ArcsLayer<ComputedDatum<RawDatum>>\n            center={center}\n            data={data}\n            arcGenerator={arcGenerator}\n            borderWidth={borderWidth}\n            borderColor={borderColor}\n            transitionMode={transitionMode}\n            onClick={handleClick}\n            onMouseEnter={handleMouseEnter}\n            onMouseMove={handleMouseMove}\n            onMouseLeave={handleMouseLeave}\n        />\n    )\n}\n","import { Fragment, ReactNode, createElement, useMemo, forwardRef, Ref, ReactElement } from 'react'\nimport {\n    // @ts-expect-error no types\n    bindDefs,\n    Container,\n    SvgWrapper,\n    useDimensions,\n    WithChartRef,\n} from '@nivo/core'\nimport { ArcLabelsLayer } from '@nivo/arcs'\nimport { defaultProps } from './props'\nimport { useSunburst, useSunburstLayerContext } from './hooks'\nimport { SunburstSvgProps, SunburstLayerId, SunburstLayer, ComputedDatum } from './types'\nimport { Arcs } from './Arcs'\nimport { InheritedColorConfig } from '@nivo/colors'\n\ntype InnerSunburstProps<RawDatum> = Partial<\n    Omit<\n        SunburstSvgProps<RawDatum>,\n        'data' | 'width' | 'height' | 'isInteractive' | 'animate' | 'motionConfig'\n    >\n> &\n    Pick<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height' | 'isInteractive'> & {\n        forwardedRef: Ref<SVGSVGElement>\n    }\n\nconst InnerSunburst = <RawDatum,>({\n    data,\n    id = defaultProps.id,\n    value = defaultProps.value,\n    valueFormat,\n    innerRadius = defaultProps.innerRadius,\n    cornerRadius = defaultProps.cornerRadius,\n    layers = defaultProps.layers as SunburstLayer<RawDatum>[],\n    colors = defaultProps.colors,\n    colorBy = defaultProps.colorBy,\n    inheritColorFromParent = defaultProps.inheritColorFromParent,\n    childColor = defaultProps.childColor as InheritedColorConfig<ComputedDatum<RawDatum>>,\n    borderWidth = defaultProps.borderWidth,\n    borderColor = defaultProps.borderColor,\n    margin: partialMargin,\n    width,\n    height,\n    enableArcLabels = defaultProps.enableArcLabels,\n    arcLabel = defaultProps.arcLabel,\n    arcLabelsRadiusOffset = defaultProps.arcLabelsRadiusOffset,\n    arcLabelsSkipAngle = defaultProps.arcLabelsSkipAngle,\n    arcLabelsSkipRadius = defaultProps.arcLabelsSkipRadius,\n    arcLabelsTextColor = defaultProps.arcLabelsTextColor,\n    arcLabelsComponent,\n    defs = defaultProps.defs,\n    fill = defaultProps.fill,\n    transitionMode = defaultProps.transitionMode,\n    isInteractive = defaultProps.isInteractive,\n    onClick,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseMove,\n    tooltip = defaultProps.tooltip,\n    role = defaultProps.role,\n    forwardedRef,\n}: InnerSunburstProps<RawDatum>) => {\n    const { innerHeight, innerWidth, margin, outerHeight, outerWidth } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const { centerX, centerY, radius } = useMemo(() => {\n        const radius = Math.min(innerWidth, innerHeight) / 2\n\n        return { radius, centerX: innerWidth / 2, centerY: innerHeight / 2 }\n    }, [innerHeight, innerWidth])\n\n    const { arcGenerator, nodes } = useSunburst({\n        data,\n        id,\n        value,\n        valueFormat,\n        radius,\n        innerRadius,\n        cornerRadius,\n        colors,\n        colorBy,\n        inheritColorFromParent,\n        childColor,\n    })\n\n    const boundDefs = bindDefs(defs, nodes, fill, {\n        colorKey: 'color',\n        targetKey: 'fill',\n    })\n\n    const layerById: Record<SunburstLayerId, ReactNode> = {\n        arcs: null,\n        arcLabels: null,\n    }\n\n    if (layers.includes('arcs')) {\n        layerById.arcs = (\n            <Arcs<RawDatum>\n                key=\"arcs\"\n                center={[centerX, centerY]}\n                data={nodes}\n                arcGenerator={arcGenerator}\n                borderWidth={borderWidth}\n                borderColor={borderColor}\n                transitionMode={transitionMode}\n                isInteractive={isInteractive}\n                tooltip={tooltip}\n                onClick={onClick}\n                onMouseEnter={onMouseEnter}\n                onMouseLeave={onMouseLeave}\n                onMouseMove={onMouseMove}\n            />\n        )\n    }\n\n    if (enableArcLabels && layers.includes('arcLabels')) {\n        layerById.arcLabels = (\n            <ArcLabelsLayer<ComputedDatum<RawDatum>>\n                key=\"arcLabels\"\n                center={[centerX, centerY]}\n                data={nodes}\n                label={arcLabel}\n                radiusOffset={arcLabelsRadiusOffset}\n                skipAngle={arcLabelsSkipAngle}\n                skipRadius={arcLabelsSkipRadius}\n                textColor={arcLabelsTextColor}\n                transitionMode={transitionMode}\n                component={arcLabelsComponent}\n            />\n        )\n    }\n\n    const layerContext = useSunburstLayerContext<RawDatum>({\n        nodes,\n        arcGenerator,\n        centerX,\n        centerY,\n        radius,\n    })\n\n    return (\n        <SvgWrapper\n            width={outerWidth}\n            height={outerHeight}\n            defs={boundDefs}\n            margin={margin}\n            role={role}\n            ref={forwardedRef}\n        >\n            {layers.map((layer, i) => {\n                if (layerById[layer as SunburstLayerId] !== undefined) {\n                    return layerById[layer as SunburstLayerId]\n                }\n\n                if (typeof layer === 'function') {\n                    return <Fragment key={i}>{createElement(layer, layerContext)}</Fragment>\n                }\n\n                return null\n            })}\n        </SvgWrapper>\n    )\n}\n\nexport const Sunburst = forwardRef(\n    <RawDatum,>(\n        {\n            isInteractive = defaultProps.isInteractive,\n            animate = defaultProps.animate,\n            motionConfig = defaultProps.motionConfig,\n            theme,\n            renderWrapper,\n            ...props\n        }: Partial<Omit<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>> &\n            Pick<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <Container\n            isInteractive={isInteractive}\n            animate={animate}\n            motionConfig={motionConfig}\n            theme={theme}\n            renderWrapper={renderWrapper}\n        >\n            <InnerSunburst<RawDatum> {...props} isInteractive={isInteractive} forwardedRef={ref} />\n        </Container>\n    )\n) as <RawDatum>(\n    props: WithChartRef<\n        Partial<Omit<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>> &\n            Pick<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>,\n        SVGSVGElement\n    >\n) => ReactElement\n","import { forwardRef, Ref, ReactElement } from 'react'\nimport { ResponsiveWrapper, ResponsiveProps, WithChartRef } from '@nivo/core'\nimport { Sunburst } from './Sunburst'\nimport { SunburstSvgProps } from './types'\n\ntype ResponsiveSunburstProps<RawDatum> = ResponsiveProps<\n    Partial<Omit<SunburstSvgProps<RawDatum>, 'data' | 'width' | 'height'>> &\n        Pick<SunburstSvgProps<RawDatum>, 'data'>\n>\n\nexport const ResponsiveSunburst = forwardRef(\n    <RawDatum,>(\n        {\n            defaultWidth,\n            defaultHeight,\n            onResize,\n            debounceResize,\n            ...props\n        }: ResponsiveSunburstProps<RawDatum>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <ResponsiveWrapper\n            defaultWidth={defaultWidth}\n            defaultHeight={defaultHeight}\n            onResize={onResize}\n            debounceResize={debounceResize}\n        >\n            {({ width, height }) => (\n                <Sunburst<RawDatum> {...props} width={width} height={height} ref={ref} />\n            )}\n        </ResponsiveWrapper>\n    )\n) as <RawDatum>(\n    props: WithChartRef<ResponsiveSunburstProps<RawDatum>, SVGSVGElement>\n) => ReactElement\n"],"names":["defaultProps","id","value","innerRadius","cornerRadius","layers","colors","scheme","colorBy","inheritColorFromParent","childColor","from","borderWidth","borderColor","enableArcLabels","arcLabel","arcLabelsRadiusOffset","arcLabelsSkipAngle","arcLabelsSkipRadius","arcLabelsTextColor","theme","animate","motionConfig","transitionMode","isInteractive","defs","fill","tooltip","_ref","formattedValue","color","_jsx","BasicTooltip","enableChip","role","useSunburst","data","_ref$id","_ref$value","valueFormat","radius","_ref$innerRadius","_ref$cornerRadius","_ref$colors","_ref$colorBy","_ref$inheritColorFrom","_ref$childColor","useTheme","getColor","useOrdinalColorScale","getChildColor","useInheritedColor","getId","usePropertyAccessor","getValue","formatValue","useValueFormatter","nodes","useMemo","_hierarchy$value","clonedData","cloneDeep","hierarchy","d3Hierarchy","sum","descendants","d3Partition","size","Math","PI","partition","slice","total","sortBy","reduce","acc","descendant","parent","percentage","path","ancestors","map","ancestor","innerR","scale","arc","startAngle","x0","endAngle","x1","sqrt","y0","outerRadius","y1","find","node","normalizedNode","toFixed","depth","height","concat","arcGenerator","useArcGenerator","useSunburstLayerContext","_ref2","centerX","centerY","Arcs","center","onClick","onMouseEnter","onMouseMove","onMouseLeave","_useTooltip","useTooltip","showTooltipFromEvent","hideTooltip","handleClick","datum","event","handleMouseEnter","createElement","handleMouseMove","handleMouseLeave","ArcsLayer","InnerSunburst","_ref$layers","_ref$borderWidth","_ref$borderColor","partialMargin","margin","width","_ref$enableArcLabels","_ref$arcLabel","_ref$arcLabelsRadiusO","_ref$arcLabelsSkipAng","_ref$arcLabelsSkipRad","_ref$arcLabelsTextCol","arcLabelsComponent","_ref$defs","_ref$fill","_ref$transitionMode","_ref$isInteractive","_ref$tooltip","_ref$role","forwardedRef","_useDimensions","useDimensions","innerHeight","innerWidth","outerHeight","outerWidth","_useMemo","min","_useSunburst","boundDefs","bindDefs","colorKey","targetKey","layerById","arcs","arcLabels","includes","jsx","ArcLabelsLayer","label","radiusOffset","skipAngle","skipRadius","textColor","component","layerContext","SvgWrapper","ref","children","layer","i","undefined","Fragment","Sunburst","forwardRef","_ref2$isInteractive","_ref2$animate","_ref2$motionConfig","renderWrapper","props","_objectWithoutPropertiesLoose","_excluded","Container","_extends","ResponsiveSunburst","defaultWidth","defaultHeight","onResize","debounceResize","ResponsiveWrapper"],"mappings":"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"}