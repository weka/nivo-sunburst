"use strict";var e=require("react"),r=require("@nivo/core"),o=require("@nivo/arcs"),a=require("@nivo/tooltip"),t=require("react/jsx-runtime"),i=require("d3-hierarchy"),n=require("d3-scale"),l=require("lodash/cloneDeep.js"),s=require("lodash/sortBy.js"),d=require("@nivo/theming"),u=require("@nivo/colors"),c=require("@react-spring/web");function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,a=Array(r);o<r;o++)a[o]=e[o];return a}function v(e,r){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=function(e,r){if(e){if("string"==typeof e)return f(e,r);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?f(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){o&&(e=o);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var a in o)({}).hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},h.apply(null,arguments)}function b(e,r){if(null==e)return{};var o={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==r.indexOf(a))continue;o[a]=e[a]}return o}var p={id:"id",value:"value",cornerRadius:0,innerRadius:0,renderRootNode:!1,layers:["arcs","arcLabels","radialLabels"],colors:{scheme:"nivo"},colorBy:"id",inheritColorFromParent:!0,childColor:{from:"color"},borderWidth:1,borderColor:"white",enableArcLabels:!1,enableRadialLabels:!1,radialLabel:"id",radialLabelsRadiusOffset:.5,radialLabelsSkipAngle:10,radialLabelsSkipRadius:0,radialLabelsRotation:0,radialLabelsTextColor:{theme:"labels.text.fill"},arcLabel:"formattedValue",arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:0,arcLabelsSkipRadius:0,arcLabelsTextColor:{theme:"labels.text.fill"},animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",isInteractive:!0,defs:[],fill:[],tooltip:function(e){var r=e.id,o=e.formattedValue,i=e.color;return t.jsx(a.BasicTooltip,{id:r,value:o,enableChip:!0,color:i})},role:"img"},m=function(a){var t=a.data,c=a.id,f=void 0===c?p.id:c,v=a.value,h=void 0===v?p.value:v,b=a.valueFormat,m=a.radius,g=a.cornerRadius,R=void 0===g?p.cornerRadius:g,L=a.innerRadius,y=void 0===L?p.innerRadius:L,x=a.renderRootNode,C=void 0===x?p.renderRootNode:x,M=a.colors,A=void 0===M?p.colors:M,S=a.colorBy,k=void 0===S?p.colorBy:S,I=a.inheritColorFromParent,j=void 0===I?p.inheritColorFromParent:I,P=a.childColor,O=void 0===P?p.childColor:P,W=d.useTheme(),w=u.useOrdinalColorScale(A,k),T=u.useInheritedColor(O,W),F=r.usePropertyAccessor(f),q=r.usePropertyAccessor(h),E=r.useValueFormatter(b),B=e.useMemo((function(){var e,r=l(t),o=i.hierarchy(r).sum(q),a=i.partition().size([2*Math.PI,m*m]),d=C?a(o).descendants():a(o).descendants().slice(1),u=null!=(e=o.value)?e:0,c=s(d,"depth"),f=m*Math.min(y,1),v=c.length>0?c[c.length-1].depth:0,h=n.scaleRadial().domain([0,v]).range([f,m]);return c.reduce((function(e,r){var o,a=F(r.data),t=r.value,i=100*t/u,n=r.ancestors().map((function(e){return F(e.data)})),l=C&&0===r.depth,s={startAngle:r.x0,endAngle:r.x1,innerRadius:l?0:h(r.depth-1),outerRadius:l?f:h(r.depth)};r.parent&&(o=e.find((function(e){return e.id===F(r.parent.data)})));var d={id:a,path:n,value:t,percentage:i,formattedValue:b?E(t):i.toFixed(2)+"%",color:"",arc:s,data:r.data,depth:r.depth,height:r.height};return j&&o&&d.depth>1?d.color=T(o,d):d.color=w(d),[].concat(e,[d])}),[])}),[t,m,y,C,q,F,b,E,w,j,T]);return{arcGenerator:o.useArcGenerator({cornerRadius:R}),nodes:B}},g=function(r){var o=r.nodes,a=r.arcGenerator,t=r.centerX,i=r.centerY,n=r.radius;return e.useMemo((function(){return{nodes:o,arcGenerator:a,centerX:t,centerY:i,radius:n}}),[o,a,t,i,n])},R=function(r){var i=r.center,n=r.data,l=r.arcGenerator,s=r.borderWidth,d=r.borderColor,u=r.isInteractive,c=r.onClick,f=r.onMouseEnter,v=r.onMouseMove,h=r.onMouseLeave,b=r.tooltip,p=r.transitionMode,m=a.useTooltip(),g=m.showTooltipFromEvent,R=m.hideTooltip,L=e.useMemo((function(){if(u)return function(e,r){null==c||c(e,r)}}),[u,c]),y=e.useMemo((function(){if(u)return function(r,o){g(e.createElement(b,r),o),null==f||f(r,o)}}),[u,g,b,f]),x=e.useMemo((function(){if(u)return function(r,o){g(e.createElement(b,r),o),null==v||v(r,o)}}),[u,g,b,v]),C=e.useMemo((function(){if(u)return function(e,r){R(),null==h||h(e,r)}}),[u,R,h]);return t.jsx(o.ArcsLayer,{center:i,data:n,arcGenerator:l,borderWidth:s,borderColor:d,transitionMode:p,onClick:L,onMouseEnter:y,onMouseMove:x,onMouseLeave:C})},L=function(o){var a,i=o.center,n=o.data,l=o.label,s=o.skipAngle,f=o.skipRadius,b=o.radiusOffset,p=o.textColor,m=o.rotation,g=d.useTheme(),R=r.useMotionConfig(),L=R.animate,y=R.config,x=u.useInheritedColor(p,g),C=r.usePropertyAccessor(l),M=(null==(a=g.labels)||null==(a=a.text)?void 0:a.fontSize)||11,A=.6*M,S=1.2*M,k=e.useMemo((function(){for(var e,r=[],o=v(n);!(e=o()).done;){var a=e.value,t=a.arc;if(!(180*(t.endAngle-t.startAngle)/Math.PI<s)){var i=t.outerRadius-t.innerRadius;if(!(i<f)){var l=(t.startAngle+t.endAngle)/2,d=t.innerRadius+(t.outerRadius-t.innerRadius)*b,u=d*Math.sin(l),c=-d*Math.cos(l),h=C(a),p=String(h),g=d*(t.endAngle-t.startAngle),R=i>=S+4?Math.floor((g-8)/A):0,L=g>=S+4?Math.floor((i-8)/A):0,y=p.length,M=void 0,k=void 0;if(R>=y)M=180*l/Math.PI+m,k=p;else if(L>=y)M=180*l/Math.PI-90+m,k=p;else{var I=R>=L;M=I?180*l/Math.PI+m:180*l/Math.PI-90+m;var j=I?R:L;if(j<=3)continue;k=p.slice(0,j-1)+"â€¦"}var P=(M%360+360)%360;P>90&&P<270&&(M+=180);var O=x(a);r.push({id:a.id,x:u,y:c,rotation:M,label:k,color:O})}}}return r}),[n,s,f,b,m,A,S,C,x]),I=c.useTransition(k,{keys:function(e){return e.id},from:function(e){return{x:0,y:0,rotation:e.rotation,opacity:0}},enter:function(e){return{x:e.x,y:e.y,rotation:e.rotation,opacity:1}},update:function(e){return{x:e.x,y:e.y,rotation:e.rotation,opacity:1}},leave:{opacity:0},config:y,immediate:!L});return t.jsx("g",{transform:"translate("+i[0]+", "+i[1]+")",children:I((function(e,r){return t.jsx(c.animated.text,{transform:c.to([e.x,e.y,e.rotation],(function(e,r,o){return"translate("+e+", "+r+") rotate("+o+")"})),textAnchor:"middle",dominantBaseline:"central",opacity:e.opacity,style:h({},g.labels.text,{fill:r.color,pointerEvents:"none"}),children:r.label},String(r.id))}))})},y=["isInteractive","animate","motionConfig","theme","renderWrapper"],x=function(a){var i=a.data,n=a.id,l=void 0===n?p.id:n,s=a.value,d=void 0===s?p.value:s,u=a.innerRadius,c=void 0===u?p.innerRadius:u,f=a.renderRootNode,v=void 0===f?p.renderRootNode:f,h=a.valueFormat,b=a.cornerRadius,y=void 0===b?p.cornerRadius:b,x=a.layers,C=void 0===x?p.layers:x,M=a.colors,A=void 0===M?p.colors:M,S=a.colorBy,k=void 0===S?p.colorBy:S,I=a.inheritColorFromParent,j=void 0===I?p.inheritColorFromParent:I,P=a.childColor,O=void 0===P?p.childColor:P,W=a.borderWidth,w=void 0===W?p.borderWidth:W,T=a.borderColor,F=void 0===T?p.borderColor:T,q=a.margin,E=a.width,B=a.height,G=a.enableArcLabels,z=void 0===G?p.enableArcLabels:G,N=a.arcLabel,H=void 0===N?p.arcLabel:N,X=a.arcLabelsRadiusOffset,Y=void 0===X?p.arcLabelsRadiusOffset:X,V=a.arcLabelsSkipAngle,D=void 0===V?p.arcLabelsSkipAngle:V,K=a.arcLabelsSkipRadius,U=void 0===K?p.arcLabelsSkipRadius:K,$=a.arcLabelsTextColor,J=void 0===$?p.arcLabelsTextColor:$,Q=a.arcLabelsComponent,Z=a.enableRadialLabels,_=void 0===Z?p.enableRadialLabels:Z,ee=a.radialLabel,re=void 0===ee?p.radialLabel:ee,oe=a.radialLabelsRadiusOffset,ae=void 0===oe?p.radialLabelsRadiusOffset:oe,te=a.radialLabelsSkipAngle,ie=void 0===te?p.radialLabelsSkipAngle:te,ne=a.radialLabelsSkipRadius,le=void 0===ne?p.radialLabelsSkipRadius:ne,se=a.radialLabelsRotation,de=void 0===se?p.radialLabelsRotation:se,ue=a.radialLabelsTextColor,ce=void 0===ue?p.radialLabelsTextColor:ue,fe=a.defs,ve=void 0===fe?p.defs:fe,he=a.fill,be=void 0===he?p.fill:he,pe=a.transitionMode,me=void 0===pe?p.transitionMode:pe,ge=a.isInteractive,Re=void 0===ge?p.isInteractive:ge,Le=a.onClick,ye=a.onMouseEnter,xe=a.onMouseLeave,Ce=a.onMouseMove,Me=a.tooltip,Ae=void 0===Me?p.tooltip:Me,Se=a.role,ke=void 0===Se?p.role:Se,Ie=a.forwardedRef,je=r.useDimensions(E,B,q),Pe=je.innerHeight,Oe=je.innerWidth,We=je.margin,we=je.outerHeight,Te=je.outerWidth,Fe=e.useMemo((function(){return{radius:Math.min(Oe,Pe)/2,centerX:Oe/2,centerY:Pe/2}}),[Pe,Oe]),qe=Fe.centerX,Ee=Fe.centerY,Be=Fe.radius,Ge=m({data:i,id:l,value:d,valueFormat:h,radius:Be,cornerRadius:y,innerRadius:c,renderRootNode:v,colors:A,colorBy:k,inheritColorFromParent:j,childColor:O}),ze=Ge.arcGenerator,Ne=Ge.nodes,He=r.bindDefs(ve,Ne,be,{colorKey:"color",targetKey:"fill"}),Xe={arcs:null,arcLabels:null,radialLabels:null};C.includes("arcs")&&(Xe.arcs=t.jsx(R,{center:[qe,Ee],data:Ne,arcGenerator:ze,borderWidth:w,borderColor:F,transitionMode:me,isInteractive:Re,tooltip:Ae,onClick:Le,onMouseEnter:ye,onMouseLeave:xe,onMouseMove:Ce},"arcs")),z&&C.includes("arcLabels")&&(Xe.arcLabels=t.jsx(o.ArcLabelsLayer,{center:[qe,Ee],data:Ne,label:H,radiusOffset:Y,skipAngle:D,skipRadius:U,textColor:J,transitionMode:me,component:Q},"arcLabels")),_&&C.includes("radialLabels")&&(Xe.radialLabels=t.jsx(L,{center:[qe,Ee],data:Ne,label:re,radiusOffset:ae,skipAngle:ie,skipRadius:le,rotation:de,textColor:ce},"radialLabels"));var Ye=g({nodes:Ne,arcGenerator:ze,centerX:qe,centerY:Ee,radius:Be});return t.jsx(r.SvgWrapper,{width:Te,height:we,defs:He,margin:We,role:ke,ref:Ie,children:C.map((function(r,o){return void 0!==Xe[r]?Xe[r]:"function"==typeof r?t.jsx(e.Fragment,{children:e.createElement(r,Ye)},o):null}))})},C=e.forwardRef((function(e,o){var a=e.isInteractive,i=void 0===a?p.isInteractive:a,n=e.animate,l=void 0===n?p.animate:n,s=e.motionConfig,d=void 0===s?p.motionConfig:s,u=e.theme,c=e.renderWrapper,f=b(e,y);return t.jsx(r.Container,{isInteractive:i,animate:l,motionConfig:d,theme:u,renderWrapper:c,children:t.jsx(x,h({},f,{isInteractive:i,forwardedRef:o}))})})),M=["defaultWidth","defaultHeight","onResize","debounceResize"],A=e.forwardRef((function(e,o){var a=e.defaultWidth,i=e.defaultHeight,n=e.onResize,l=e.debounceResize,s=b(e,M);return t.jsx(r.ResponsiveWrapper,{defaultWidth:a,defaultHeight:i,onResize:n,debounceResize:l,children:function(e){var r=e.width,a=e.height;return t.jsx(C,h({},s,{width:r,height:a,ref:o}))}})}));exports.RadialLabelsLayer=L,exports.ResponsiveSunburst=A,exports.Sunburst=C,exports.defaultProps=p,exports.useSunburst=m,exports.useSunburstLayerContext=g;
//# sourceMappingURL=nivo-sunburst.cjs.js.map
