import{useMemo as e,createElement as r,forwardRef as o,Fragment as i}from"react";import{usePropertyAccessor as n,useValueFormatter as t,Container as a,useDimensions as d,bindDefs as l,SvgWrapper as c,ResponsiveWrapper as s}from"@nivo/core";import{useArcGenerator as u,ArcsLayer as v,ArcLabelsLayer as f}from"@nivo/arcs";import{BasicTooltip as h,useTooltip as m}from"@nivo/tooltip";import{jsx as p}from"react/jsx-runtime";import{hierarchy as b,partition as g}from"d3-hierarchy";import C from"lodash/cloneDeep.js";import R from"lodash/sortBy.js";import{useTheme as L}from"@nivo/theming";import{useOrdinalColorScale as M,useInheritedColor as y}from"@nivo/colors";function W(){return W=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},W.apply(null,arguments)}function k(e,r){if(null==e)return{};var o={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==r.indexOf(i))continue;o[i]=e[i]}return o}var x={id:"id",value:"value",innerRadius:.3,cornerRadius:0,layers:["arcs","arcLabels"],colors:{scheme:"nivo"},colorBy:"id",inheritColorFromParent:!0,childColor:{from:"color"},borderWidth:1,borderColor:"white",enableArcLabels:!1,arcLabel:"formattedValue",arcLabelsRadiusOffset:.5,arcLabelsSkipAngle:0,arcLabelsSkipRadius:0,arcLabelsTextColor:{theme:"labels.text.fill"},animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",isInteractive:!0,defs:[],fill:[],tooltip:function(e){var r=e.id,o=e.formattedValue,i=e.color;return p(h,{id:r,value:o,enableChip:!0,color:i})},role:"img"},F=function(r){var o=r.data,i=r.id,a=void 0===i?x.id:i,d=r.value,l=void 0===d?x.value:d,c=r.valueFormat,s=r.radius,v=r.innerRadius,f=void 0===v?x.innerRadius:v,h=r.cornerRadius,m=void 0===h?x.cornerRadius:h,p=r.colors,W=void 0===p?x.colors:p,k=r.colorBy,F=void 0===k?x.colorBy:k,I=r.inheritColorFromParent,w=void 0===I?x.inheritColorFromParent:I,A=r.childColor,O=void 0===A?x.childColor:A,P=L(),G=M(W,F),z=y(O,P),B=n(a),S=n(l),j=t(c),E=e((function(){var e,r=C(o),i=b(r).sum(S),n=g().size([2*Math.PI,s*s])(i).descendants().slice(1),t=null!=(e=i.value)?e:0;return R(n,"depth").reduce((function(e,r){var o,i=B(r.data),n=r.value,a=100*n/t,d=r.ancestors().map((function(e){return B(e.data)})),l=f*s,u=1-f,v={startAngle:r.x0,endAngle:r.x1,innerRadius:l+Math.sqrt(r.y0)*u,outerRadius:l+Math.sqrt(r.y1)*u};r.parent&&(o=e.find((function(e){return e.id===B(r.parent.data)})));var h={id:i,path:d,value:n,percentage:a,formattedValue:c?j(n):a.toFixed(2)+"%",color:"",arc:v,data:r.data,depth:r.depth,height:r.height};return w&&o&&h.depth>1?h.color=z(o,h):h.color=G(h),[].concat(e,[h])}),[])}),[o,s,f,S,B,c,j,G,w,z]);return{arcGenerator:u({cornerRadius:m}),nodes:E}},I=function(r){var o=r.nodes,i=r.arcGenerator,n=r.centerX,t=r.centerY,a=r.radius;return e((function(){return{nodes:o,arcGenerator:i,centerX:n,centerY:t,radius:a}}),[o,i,n,t,a])},w=function(o){var i=o.center,n=o.data,t=o.arcGenerator,a=o.borderWidth,d=o.borderColor,l=o.isInteractive,c=o.onClick,s=o.onMouseEnter,u=o.onMouseMove,f=o.onMouseLeave,h=o.tooltip,b=o.transitionMode,g=m(),C=g.showTooltipFromEvent,R=g.hideTooltip,L=e((function(){if(l)return function(e,r){null==c||c(e,r)}}),[l,c]),M=e((function(){if(l)return function(e,o){C(r(h,e),o),null==s||s(e,o)}}),[l,C,h,s]),y=e((function(){if(l)return function(e,o){C(r(h,e),o),null==u||u(e,o)}}),[l,C,h,u]),W=e((function(){if(l)return function(e,r){R(),null==f||f(e,r)}}),[l,R,f]);return p(v,{center:i,data:n,arcGenerator:t,borderWidth:a,borderColor:d,transitionMode:b,onClick:L,onMouseEnter:M,onMouseMove:y,onMouseLeave:W})},A=["isInteractive","animate","motionConfig","theme","renderWrapper"],O=function(o){var n=o.data,t=o.id,a=void 0===t?x.id:t,s=o.value,u=void 0===s?x.value:s,v=o.valueFormat,h=o.innerRadius,m=void 0===h?x.innerRadius:h,b=o.cornerRadius,g=void 0===b?x.cornerRadius:b,C=o.layers,R=void 0===C?x.layers:C,L=o.colors,M=void 0===L?x.colors:L,y=o.colorBy,W=void 0===y?x.colorBy:y,k=o.inheritColorFromParent,A=void 0===k?x.inheritColorFromParent:k,O=o.childColor,P=void 0===O?x.childColor:O,G=o.borderWidth,z=void 0===G?x.borderWidth:G,B=o.borderColor,S=void 0===B?x.borderColor:B,j=o.margin,E=o.width,H=o.height,T=o.enableArcLabels,X=void 0===T?x.enableArcLabels:T,Y=o.arcLabel,V=void 0===Y?x.arcLabel:Y,q=o.arcLabelsRadiusOffset,K=void 0===q?x.arcLabelsRadiusOffset:q,D=o.arcLabelsSkipAngle,J=void 0===D?x.arcLabelsSkipAngle:D,N=o.arcLabelsSkipRadius,Q=void 0===N?x.arcLabelsSkipRadius:N,U=o.arcLabelsTextColor,Z=void 0===U?x.arcLabelsTextColor:U,$=o.arcLabelsComponent,_=o.defs,ee=void 0===_?x.defs:_,re=o.fill,oe=void 0===re?x.fill:re,ie=o.transitionMode,ne=void 0===ie?x.transitionMode:ie,te=o.isInteractive,ae=void 0===te?x.isInteractive:te,de=o.onClick,le=o.onMouseEnter,ce=o.onMouseLeave,se=o.onMouseMove,ue=o.tooltip,ve=void 0===ue?x.tooltip:ue,fe=o.role,he=void 0===fe?x.role:fe,me=o.forwardedRef,pe=d(E,H,j),be=pe.innerHeight,ge=pe.innerWidth,Ce=pe.margin,Re=pe.outerHeight,Le=pe.outerWidth,Me=e((function(){return{radius:Math.min(ge,be)/2,centerX:ge/2,centerY:be/2}}),[be,ge]),ye=Me.centerX,We=Me.centerY,ke=Me.radius,xe=F({data:n,id:a,value:u,valueFormat:v,radius:ke,innerRadius:m,cornerRadius:g,colors:M,colorBy:W,inheritColorFromParent:A,childColor:P}),Fe=xe.arcGenerator,Ie=xe.nodes,we=l(ee,Ie,oe,{colorKey:"color",targetKey:"fill"}),Ae={arcs:null,arcLabels:null};R.includes("arcs")&&(Ae.arcs=p(w,{center:[ye,We],data:Ie,arcGenerator:Fe,borderWidth:z,borderColor:S,transitionMode:ne,isInteractive:ae,tooltip:ve,onClick:de,onMouseEnter:le,onMouseLeave:ce,onMouseMove:se},"arcs")),X&&R.includes("arcLabels")&&(Ae.arcLabels=p(f,{center:[ye,We],data:Ie,label:V,radiusOffset:K,skipAngle:J,skipRadius:Q,textColor:Z,transitionMode:ne,component:$},"arcLabels"));var Oe=I({nodes:Ie,arcGenerator:Fe,centerX:ye,centerY:We,radius:ke});return p(c,{width:Le,height:Re,defs:we,margin:Ce,role:he,ref:me,children:R.map((function(e,o){return void 0!==Ae[e]?Ae[e]:"function"==typeof e?p(i,{children:r(e,Oe)},o):null}))})},P=o((function(e,r){var o=e.isInteractive,i=void 0===o?x.isInteractive:o,n=e.animate,t=void 0===n?x.animate:n,d=e.motionConfig,l=void 0===d?x.motionConfig:d,c=e.theme,s=e.renderWrapper,u=k(e,A);return p(a,{isInteractive:i,animate:t,motionConfig:l,theme:c,renderWrapper:s,children:p(O,W({},u,{isInteractive:i,forwardedRef:r}))})})),G=["defaultWidth","defaultHeight","onResize","debounceResize"],z=o((function(e,r){var o=e.defaultWidth,i=e.defaultHeight,n=e.onResize,t=e.debounceResize,a=k(e,G);return p(s,{defaultWidth:o,defaultHeight:i,onResize:n,debounceResize:t,children:function(e){var o=e.width,i=e.height;return p(P,W({},a,{width:o,height:i,ref:r}))}})}));export{z as ResponsiveSunburst,P as Sunburst,x as defaultProps,F as useSunburst,I as useSunburstLayerContext};
//# sourceMappingURL=nivo-sunburst.mjs.map
